<h1>ğŸ›ï¸ Remplir un sÃ©lecteur dynamique dans WeWeb Ã  partir d'une requÃªte</h1>

<p><em>WeWeb permet de crÃ©er des interfaces riches et interactives sans code. Parmi les besoins les plus courants : afficher une liste dÃ©roulante dynamique alimentÃ©e par des donnÃ©es issues d'une API ou d'une base de donnÃ©es.</em></p>

<!-- Metadata block -->
<div class="metadata">
    <p>ğŸ·ï¸ <strong>CatÃ©gorie:</strong> WeWeb</p>
    <p>ğŸ¯ <strong>Niveau:</strong> DÃ©butant</p>
    <p>ğŸ” <strong>Mots-clÃ©s:</strong> Select, Options dynamiques, Data binding, RequÃªtes, item.name, item.id, get_all_categorie, Menu dÃ©roulant</p>
    <p>ğŸ“… <strong>Mise Ã  jour:</strong> 07/01/2025</p>
    <p>â±ï¸ <strong>Temps passÃ©:</strong> 20min</p>
    <p>âš™ï¸ <strong>Stack:</strong> WeWeb + Xano</p>
</div>

<!-- TL;DR -->
<div class="tldr">
âœ… <strong>TL;DR :</strong>
Pour remplir un composant Select dans WeWeb avec des donnÃ©es dynamiques, utilisez la formule <code>get_all_categorie.data</code> dans <strong>Options</strong>, puis <code>item.name</code> pour le <strong>Label per item</strong> et <code>item.id</code> pour le <strong>Value per item</strong>. Simple, rapide, et sans code !
</div>

<h2>ğŸ¤” ProblÃ¨me rencontrÃ©</h2>

<p>Lors de la crÃ©ation d'un formulaire ou d'une interface, on a souvent besoin d'afficher un menu dÃ©roulant (Select) qui propose Ã  l'utilisateur une liste de choix dynamiques :</p>

<ul>
    <li>ğŸ“¦ Liste de catÃ©gories de produits</li>
    <li>ğŸ‘¥ Liste d'utilisateurs ou de clients</li>
    <li>ğŸ¢ Liste de services, dÃ©partements, ou statuts</li>
    <li>ğŸš— Liste de moyens de transport (VÃ©lo, Avion, Bateau, etc.)</li>
</ul>

<p>Le problÃ¨me ? Ces donnÃ©es ne sont pas statiques : elles proviennent d'une base de donnÃ©es et peuvent changer Ã  tout moment.</p>

<p><strong>ğŸ’¡ Exemple utilisateur :</strong> Vous crÃ©ez un formulaire d'ajout de produit, et vous voulez que l'utilisateur puisse sÃ©lectionner une catÃ©gorie dans un menu dÃ©roulant. La liste des catÃ©gories est stockÃ©e dans Xano et doit Ãªtre rÃ©cupÃ©rÃ©e dynamiquement.</p>

<h2>ğŸ” Explication simplifiÃ©e</h2>

<p>Dans WeWeb, un composant <strong>Select</strong> (menu dÃ©roulant) peut Ãªtre alimentÃ© par des donnÃ©es issues d'une requÃªte API. Pour cela, il faut :</p>

<ol>
    <li>ğŸ“¡ <strong>RÃ©cupÃ©rer les donnÃ©es</strong> via une requÃªte (ex: <code>get_all_categorie</code>)</li>
    <li>ğŸ”— <strong>Lier ces donnÃ©es</strong> au composant Select via le champ <strong>Options</strong></li>
    <li>ğŸ‘ï¸ <strong>DÃ©finir ce qui s'affiche</strong> (le texte visible) avec <strong>Label per item</strong></li>
    <li>ğŸ’¾ <strong>DÃ©finir ce qui est stockÃ©</strong> (la valeur exploitable) avec <strong>Value per item</strong></li>
</ol>

<p>Cela permet de crÃ©er un menu dÃ©roulant totalement dynamique, qui se met Ã  jour automatiquement lorsque les donnÃ©es changent dans votre base.</p>

<div class="callout callout-tip">
âœ¨ <strong>Astuce</strong><br>
WeWeb utilise le contexte <code>item</code> pour reprÃ©senter chaque Ã©lÃ©ment de la liste. Ainsi, <code>item.name</code> accÃ¨de au champ "name" de chaque objet, et <code>item.id</code> accÃ¨de Ã  l'identifiant.
</div>

<h2>ğŸ§ª Solution : ProcÃ©dure Ã©tape par Ã©tape</h2>

<h3>Ã‰tape 1ï¸âƒ£ : PrÃ©parer la requÃªte</h3>

<p>Dans le menu <strong>Data â†’ Requests</strong> de WeWeb, vÃ©rifiez que votre requÃªte renvoie bien une liste de donnÃ©es structurÃ©es.</p>

<p><strong>Exemple de rÃ©ponse attendue :</strong></p>

<pre><code>[
  { "id": 1, "name": "VÃ©lo" },
  { "id": 2, "name": "Avion" },
  { "id": 3, "name": "Bateau" }
]</code></pre>

<p>Chaque objet doit contenir au minimum :</p>
<ul>
    <li>Un <strong>identifiant</strong> (ici <code>id</code>)</li>
    <li>Un <strong>nom ou libellÃ©</strong> (ici <code>name</code>)</li>
</ul>

<h3>Ã‰tape 2ï¸âƒ£ : Ajouter le composant Select</h3>

<p>Sur votre page WeWeb :</p>

<ol>
    <li>Ajoutez un composant <strong>Select</strong> (menu dÃ©roulant)</li>
    <li>SÃ©lectionnez-le dans l'arborescence Ã  gauche</li>
    <li>Dans le panneau de droite, repÃ©rez les paramÃ¨tres suivants :
        <ul>
            <li><strong>Option type</strong> : choisissez <code>Text</code></li>
            <li><strong>Options</strong></li>
            <li><strong>Label per item</strong></li>
            <li><strong>Value per item</strong></li>
            <li><strong>Initial value</strong> (facultatif)</li>
        </ul>
    </li>
</ol>

<h3>Ã‰tape 3ï¸âƒ£ : Lier les donnÃ©es de la requÃªte</h3>

<p>ğŸ§  <strong>Ã‰tape clÃ© :</strong> Remplir les options dynamiquement</p>

<ol>
    <li>Cliquez sur <strong>Edit formula</strong> (icÃ´ne fx) Ã  cÃ´tÃ© du champ <strong>Options</strong></li>
    <li>Saisissez la formule suivante :</li>
</ol>

<pre><code>get_all_categorie.data</code></pre>

<p>Cette formule indique Ã  WeWeb d'utiliser les donnÃ©es renvoyÃ©es par la requÃªte <code>get_all_categorie</code>.</p>

<div class="callout callout-warning">
âš ï¸ <strong>Attention</strong><br>
Assurez-vous que votre requÃªte est bien dÃ©clenchÃ©e avant l'affichage du composant Select (par exemple, au chargement de la page). Sinon, le menu sera vide.
</div>

<h3>Ã‰tape 4ï¸âƒ£ : DÃ©finir le texte visible (Label per item)</h3>

<p>Pour que chaque option affiche un texte lisible (ex: "VÃ©lo", "Avion", "Bateau"), configurez le <strong>Label per item</strong> :</p>

<ol>
    <li>Cliquez sur <strong>Edit formula</strong> Ã  cÃ´tÃ© de <strong>Label per item</strong></li>
    <li>Saisissez :</li>
</ol>

<pre><code>item.name</code></pre>

<p>Cela affichera le contenu du champ <code>name</code> de chaque objet dans la liste dÃ©roulante.</p>

<h3>Ã‰tape 5ï¸âƒ£ : DÃ©finir la valeur stockÃ©e (Value per item)</h3>

<p>Pour que WeWeb sache quelle valeur renvoyer lorsque l'utilisateur sÃ©lectionne une option (gÃ©nÃ©ralement l'identifiant), configurez le <strong>Value per item</strong> :</p>

<ol>
    <li>Cliquez sur <strong>Edit formula</strong> Ã  cÃ´tÃ© de <strong>Value per item</strong></li>
    <li>Saisissez :</li>
</ol>

<pre><code>item.id</code></pre>

<p>Ainsi, lorsque l'utilisateur sÃ©lectionne "VÃ©lo", la valeur <code>1</code> sera stockÃ©e et exploitable dans vos workflows ou requÃªtes.</p>

<h3>Ã‰tape 6ï¸âƒ£ : (Optionnel) DÃ©finir une valeur par dÃ©faut</h3>

<p>Si vous souhaitez qu'une option soit sÃ©lectionnÃ©e automatiquement au chargement, configurez le champ <strong>Initial value</strong> :</p>

<pre><code>get_all_categorie.data[0].id</code></pre>

<p>Cela sÃ©lectionnera automatiquement le premier Ã©lÃ©ment de la liste (index <code>[0]</code>).</p>

<h2>ğŸ“Š RÃ©sumÃ© des formules Ã  utiliser</h2>

<table>
    <thead>
        <tr>
            <th>Ã‰lÃ©ment</th>
            <th>Formule</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><strong>Options</strong></td>
            <td><code>get_all_categorie.data</code></td>
            <td>Liste complÃ¨te des donnÃ©es de la requÃªte</td>
        </tr>
        <tr>
            <td><strong>Label per item</strong></td>
            <td><code>item.name</code></td>
            <td>Texte affichÃ© pour chaque option</td>
        </tr>
        <tr>
            <td><strong>Value per item</strong></td>
            <td><code>item.id</code></td>
            <td>Valeur renvoyÃ©e lors de la sÃ©lection</td>
        </tr>
        <tr>
            <td><strong>Initial value</strong> (facultatif)</td>
            <td><code>get_all_categorie.data[0].id</code></td>
            <td>SÃ©lection automatique du premier Ã©lÃ©ment</td>
        </tr>
    </tbody>
</table>

<h2>ğŸ§° Tester le sÃ©lecteur</h2>

<p>Une fois la configuration terminÃ©e :</p>

<ol>
    <li>Passez votre projet en mode <strong>Preview</strong></li>
    <li>VÃ©rifiez que le menu dÃ©roulant affiche bien la liste des catÃ©gories</li>
    <li>SÃ©lectionnez une option et vÃ©rifiez que la valeur correcte est stockÃ©e (visible dans l'onglet de dÃ©bogage ou en l'envoyant Ã  un workflow)</li>
</ol>

<div class="callout callout-tip">
âœ¨ <strong>Astuce de dÃ©bogage</strong><br>
Utilisez l'onglet <strong>Data</strong> de WeWeb pour inspecter en temps rÃ©el la valeur sÃ©lectionnÃ©e dans votre composant Select. Cela vous aidera Ã  vÃ©rifier que <code>item.id</code> est bien renvoyÃ©.
</div>

<h2>ğŸš€ Pour aller plus loin</h2>

<p>Une fois votre sÃ©lecteur fonctionnel, vous pouvez :</p>

<ul>
    <li>ğŸ” <strong>Filtrer des donnÃ©es sur la page</strong> en fonction de la catÃ©gorie sÃ©lectionnÃ©e</li>
    <li>ğŸ“¤ <strong>Envoyer la valeur sÃ©lectionnÃ©e</strong> Ã  une autre requÃªte ou un workflow (ex: crÃ©er un produit avec la catÃ©gorie choisie)</li>
    <li>ğŸ’¾ <strong>Stocker la valeur dans une base de donnÃ©es</strong> via un bouton "Ajouter" ou "Sauvegarder"</li>
    <li>ğŸ”„ <strong>Cascader plusieurs sÃ©lecteurs</strong> : par exemple, sÃ©lectionner une catÃ©gorie, puis afficher les sous-catÃ©gories correspondantes dans un second Select</li>
</ul>

<div class="callout callout-advanced">
ğŸ”¬ <strong>Pour aller plus loin</strong><br>
Vous pouvez Ã©galement utiliser des filtres avancÃ©s directement dans la formule <strong>Options</strong>. Par exemple, pour n'afficher que les catÃ©gories actives : <code>get_all_categorie.data.filter(item => item.active === true)</code>
</div>

<h2>ğŸ§­ Exemple concret</h2>

<p><strong>Cas d'usage :</strong> Formulaire d'ajout d'un rÃ©parateur</p>

<p>Vous crÃ©ez un formulaire pour ajouter un nouveau rÃ©parateur dans votre application. L'utilisateur doit pouvoir sÃ©lectionner la catÃ©gorie de rÃ©paration (VÃ©lo, Avion, Bateau, etc.).</p>

<p><strong>Configuration :</strong></p>
<ul>
    <li><strong>RequÃªte :</strong> <code>get_all_categorie</code> renvoie la liste des catÃ©gories depuis Xano</li>
    <li><strong>Composant Select :</strong> ConfigurÃ© avec les formules ci-dessus</li>
    <li><strong>Bouton "Ajouter" :</strong> Envoie une requÃªte <code>create_repairer</code> avec la valeur <code>Select.value</code> (qui contient l'ID de la catÃ©gorie sÃ©lectionnÃ©e)</li>
</ul>

<p><strong>RÃ©sultat :</strong> L'utilisateur sÃ©lectionne "VÃ©lo", et l'ID <code>1</code> est automatiquement envoyÃ© Ã  votre API pour crÃ©er le rÃ©parateur avec la bonne catÃ©gorie.</p>

<!-- Final summary -->
<div class="summary">
ğŸ“Œ <strong>Ã€ retenir :</strong>
<ul>
  <li>Utilisez <code>get_all_categorie.data</code> dans <strong>Options</strong> pour alimenter le Select</li>
  <li>Configurez <code>item.name</code> pour le <strong>Label per item</strong> (texte affichÃ©)</li>
  <li>Configurez <code>item.id</code> pour le <strong>Value per item</strong> (valeur stockÃ©e)</li>
  <li>WeWeb gÃ¨re automatiquement le contexte <code>item</code> pour chaque Ã©lÃ©ment de la liste</li>
  <li>Vous pouvez enchaÃ®ner facilement avec des workflows ou d'autres requÃªtes</li>
</ul>
</div>

<h2>ğŸ“ Conclusion</h2>

<p>Configurer un sÃ©lecteur dynamique dans WeWeb Ã  partir d'une requÃªte est simple et puissant. En quelques formules, vous offrez Ã  vos utilisateurs une interface interactive et connectÃ©e Ã  vos donnÃ©es en temps rÃ©el.</p>

<p>WeWeb s'impose ainsi comme un outil de choix pour crÃ©er des applications riches et modernes, sans code mais avec une vraie logique de dÃ©veloppement.</p>

<h2>ğŸ”— Liens utiles</h2>

<ul>
    <li><a href="https://docs.weweb.io/" target="_blank">Documentation officielle WeWeb</a></li>
    <li><a href="https://docs.weweb.io/data/data-sources.html" target="_blank">WeWeb - Data Sources</a></li>
    <li><a href="#" data-article="../articles/weweb/variables-workflow.html">Variables et Workflows dans WeWeb</a></li>
    <li><a href="#" data-article="../articles/weweb/connexion-weweb-xano-filtres-dynamiques.html">Connexion WeWeb-Xano avec filtres dynamiques</a></li>
</ul>
