<h1>Mettre en forme conditionnelle un statut dans WeWeb (Datagrid vs Repeater)</h1>

<!-- Metadata block -->
<div class="metadata">
    <p>ğŸ·ï¸ <strong>CatÃ©gorie:</strong> WeWeb</p>
    <p>ğŸ¯ <strong>Niveau:</strong> IntermÃ©diaire</p>
    <p>ğŸ” <strong>Mots-clÃ©s:</strong> Datagrid, Repeater, Mise en forme conditionnelle, Cell styling, Badge conditionnel, Custom display value, Collection list, Limitation WeWeb</p>
    <p>ğŸ“… <strong>Mise Ã  jour:</strong> 01/02/2026</p>
    <p>â±ï¸ <strong>Temps passÃ©:</strong> 30min</p>
    <p>âš™ï¸ <strong>Stack:</strong> WeWeb + Figma</p>
</div>

<!-- TL;DR -->
<div class="tldr">
âœ… <strong>TL;DR :</strong>
Le Datagrid WeWeb ne permet pas d'appliquer des styles conditionnels visuels par cellule (background, radius, padding). La solution consiste Ã  utiliser un Repeater (Collection list) avec des Div personnalisÃ©es pour obtenir un rendu fidÃ¨le au design avec badges conditionnels.
</div>

<h2>ğŸ¤” ProblÃ¨me rencontrÃ©</h2>

<p><strong>Contexte :</strong> Dans le cadre du projet 10 de ma formation dÃ©veloppeur low-code, je devais reproduire un tableau (Datagrid) conÃ§u sur Figma dans WeWeb. L'un des points clÃ©s du design Ã©tait l'affichage du statut sous forme de pill (badge arrondi) avec couleur conditionnelle selon le statut : <strong>Brouillon</strong>, <strong>ArchivÃ©</strong>, <strong>TerminÃ©</strong>.</p>

<p><strong>ğŸ›‘ ProblÃ©matique principale :</strong></p>

<p>Le composant Datagrid WeWeb (version actuelle) ne permet plus :</p>
<ul>
    <li>de sÃ©lectionner une cellule individuellement,</li>
    <li>d'injecter des composants (Div, Badge, etc.) dans une cellule,</li>
    <li>ni d'appliquer un style conditionnel visuel (background, radius, padding) par cellule.</li>
</ul>

<div class="callout callout-warning">
âš ï¸ <strong>Attention</strong><br>
Les tutoriels vidÃ©o disponibles sont obsolÃ¨tes : ils montrent des fonctionnalitÃ©s (cell template, sÃ©lection de cellule, contenu custom par cellule) qui n'existent plus dans la version actuelle de WeWeb.
</div>

<h2>ğŸ” Tests rÃ©alisÃ©s</h2>

<h3>1ï¸âƒ£ Utilisation de Custom display value</h3>

<p><strong>Approche :</strong></p>
<ul>
    <li>Activation de <code>Custom display value</code> sur la colonne Statut</li>
    <li>Tentatives via l'Ã©diteur Display value (Formula)</li>
</ul>

<p><strong>RÃ©sultat :</strong></p>
<ul>
    <li>âœ… Les formules acceptent de la logique (if, switch)</li>
    <li>âŒ Elles ne peuvent renvoyer que des <strong>valeurs</strong> (texte, nombre, date)</li>
    <li>âŒ Impossible de produire un <strong>rendu visuel</strong> (badge, pill, CSS, HTML interprÃ©tÃ©)</li>
</ul>

<p>â¡ï¸ <strong>Ã‰chec.</strong></p>

<h3>2ï¸âƒ£ Tentative de rendu HTML via JavaScript</h3>

<p><strong>Approche :</strong></p>
<ul>
    <li>Retour de balises <code>&lt;span&gt;</code> avec styles inline via un switch</li>
</ul>

<p><strong>RÃ©sultat :</strong></p>
<ul>
    <li>âŒ Le HTML est affichÃ© comme <strong>texte brut</strong> ou Ã©chappÃ©</li>
    <li>âŒ Aucune interprÃ©tation HTML/CSS dans le Datagrid</li>
</ul>

<p>â¡ï¸ <strong>Ã‰chec confirmÃ©.</strong></p>

<h3>3ï¸âƒ£ Recherche de styles dynamiques (Cell / Row)</h3>

<p><strong>Approche :</strong></p>
<ul>
    <li>VÃ©rification de toutes les options disponibles dans :
        <ul>
            <li>colonne</li>
            <li>cellule</li>
            <li>ligne</li>
            <li>Datagrid global</li>
        </ul>
    </li>
</ul>

<p><strong>RÃ©sultat :</strong></p>
<ul>
    <li>âŒ Aucune option <code>Cell style</code>, <code>Cell class</code>, <code>Row class</code> ou Ã©quivalent</li>
    <li>Seuls l'alignement et la valeur textuelle sont configurables</li>
</ul>

<p>â¡ï¸ <strong>Limitation structurelle du composant.</strong></p>

<h2>ğŸ”¬ Constat technique final</h2>

<div class="callout callout-advanced">
ğŸ”¬ <strong>Analyse technique</strong><br>
Le Datagrid WeWeb est aujourd'hui un composant <strong>monolithique</strong> :
<ul>
    <li>âŒ Pas de template de cellule</li>
    <li>âŒ Pas de composants internes</li>
    <li>âŒ Pas de rendu conditionnel visuel par cellule</li>
</ul>
La logique JavaScript est autorisÃ©e uniquement pour <strong>transformer des valeurs</strong>, pas pour gÃ©nÃ©rer de l'UI.
</div>

<h2>ğŸ§ª Solution finale retenue</h2>

<h3>Choix technique</h3>

<p>ğŸ‘‰ <strong>Abandon du Datagrid natif pour cette fonctionnalitÃ© spÃ©cifique.</strong></p>

<h3>ImplÃ©mentation</h3>

<p>Remplacement du Datagrid par un <strong>Repeater (Collection list)</strong> :</p>

<ul>
    <li>Chaque <strong>ligne</strong> est un <code>Div</code> (flex)</li>
    <li>Chaque <strong>colonne</strong> est un <code>Div</code></li>
    <li>Le <strong>statut</strong> est un vrai composant "pill" avec :
        <ul>
            <li>Background conditionnel</li>
            <li>Border radius</li>
            <li>Padding</li>
            <li>Couleurs conformes Ã  Figma</li>
        </ul>
    </li>
</ul>

<div class="callout callout-tip">
âœ¨ <strong>Astuce</strong><br>
Dans le Repeater, utilisez un composant Div dÃ©diÃ© pour le badge avec des styles conditionnels basÃ©s sur la valeur du statut. Par exemple :
<ul>
    <li><code>if (status === "Brouillon") â†’ background: #FFF3CD</code></li>
    <li><code>if (status === "TerminÃ©") â†’ background: #D1E7DD</code></li>
    <li><code>if (status === "ArchivÃ©") â†’ background: #E2E3E5</code></li>
</ul>
</div>

<h3>âœ… Avantages</h3>
<ul>
    <li>Rendu 100 % fidÃ¨le au design Figma</li>
    <li>Logique conditionnelle claire</li>
    <li>Comportement maÃ®trisÃ©</li>
    <li>Solution utilisÃ©e en conditions rÃ©elles sur WeWeb</li>
</ul>

<h3>âš ï¸ InconvÃ©nients</h3>
<ul>
    <li>Perte des fonctionnalitÃ©s natives du Datagrid (tri/pagination auto)</li>
    <li>Mais acceptable et justifiÃ© dans le cadre d'un projet de formation</li>
</ul>

<h2>ğŸ§­ Exemple concret</h2>

<p><strong>Structure du Repeater :</strong></p>

<pre><code>Repeater (liÃ© Ã  collection "Devis")
  â””â”€ Div (flex-row) - Ligne du tableau
       â”œâ”€ Div - Colonne "ID"
       â”‚    â””â”€ Text: {devis.id}
       â”œâ”€ Div - Colonne "Client"
       â”‚    â””â”€ Text: {devis.client}
       â”œâ”€ Div - Colonne "Statut"
       â”‚    â””â”€ Div (pill/badge)
       â”‚         â”œâ”€ Background: [conditionnel]
       â”‚         â”œâ”€ Padding: 8px 16px
       â”‚         â”œâ”€ Border-radius: 20px
       â”‚         â””â”€ Text: {devis.statut}
       â””â”€ Div - Colonne "Montant"
            â””â”€ Text: {devis.montant}
</code></pre>

<p><strong>Logique conditionnelle pour le badge (exemple en pseudo-code) :</strong></p>

<pre><code>if (devis.statut === "Brouillon") {
  background: #FFF3CD;
  color: #856404;
} else if (devis.statut === "TerminÃ©") {
  background: #D1E7DD;
  color: #0F5132;
} else if (devis.statut === "ArchivÃ©") {
  background: #E2E3E5;
  color: #383D41;
}
</code></pre>

<!-- Final summary -->
<div class="summary">
ğŸ“Œ <strong>Ã€ retenir :</strong>
<ul>
  <li>Le Datagrid WeWeb ne supporte pas le style conditionnel par cellule ni l'injection de composants</li>
  <li>Les tutoriels vidÃ©o montrant ces fonctionnalitÃ©s sont obsolÃ¨tes</li>
  <li>Le Custom display value ne permet que de transformer des valeurs, pas de gÃ©nÃ©rer de l'UI</li>
  <li>La solution Repeater (Collection list) offre une flexibilitÃ© totale pour le rendu conditionnel</li>
  <li>Ce compromis technique est justifiÃ© quand la fidÃ©litÃ© au design prime sur les fonctionnalitÃ©s natives du Datagrid</li>
</ul>
</div>

<h2>ğŸ”— Liens utiles</h2>
<ul>
    <li><a href="https://docs.weweb.io/data/collections.html" target="_blank">Documentation WeWeb - Collections</a></li>
    <li><a href="https://docs.weweb.io/components/repeater.html" target="_blank">Documentation WeWeb - Repeater</a></li>
</ul>
