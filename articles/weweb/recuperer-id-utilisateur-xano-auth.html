<h1>RÃ©cupÃ©rer l'ID utilisateur avec Xano Auth : pas besoin de requÃªte !</h1>

<p class="subtitle">Dans cet article, je vous explique pourquoi vous n'avez PAS besoin de crÃ©er une requÃªte Xano pour rÃ©cupÃ©rer l'ID de l'utilisateur connectÃ©, et comment utiliser directement les variables globales du plugin Xano Auth dans WeWeb.</p>

<!-- Metadata block -->
<div class="metadata">
    <p>ğŸ·ï¸ <strong>CatÃ©gorie:</strong> WeWeb</p>
    <p>ğŸ¯ <strong>Niveau:</strong> DÃ©butant</p>
    <p>ğŸ” <strong>Mots-clÃ©s:</strong> Xano Auth, user.id, authentification, variables globales, WeWeb</p>
    <p>ğŸ“… <strong>Mise Ã  jour:</strong> 19/10/2025</p>
    <p>â±ï¸ <strong>Temps passÃ©:</strong> 20min</p>
    <p>âš™ï¸ <strong>Stack:</strong> WeWeb + Xano</p>
</div>

<!-- TL;DR -->
<div class="tldr">
âœ… <strong>TL;DR :</strong>
Le plugin Xano Auth de WeWeb retourne automatiquement l'objet <code>user</code> complet (incluant l'ID). Vous n'avez pas besoin de crÃ©er une requÃªte GET /user/{id} pour rÃ©cupÃ©rer l'ID utilisateur. Utilisez simplement <code>{{ user.id }}</code> partout dans votre application.
</div>

<h2>ğŸ¤” ProblÃ¨me rencontrÃ©</h2>

<h3>ğŸ›‘ Situation initiale</h3>
<p>Vous travaillez sur un projet WeWeb + Xano et souhaitez stocker l'ID de l'utilisateur connectÃ© dans une variable globale pour l'utiliser dans diffÃ©rentes pages et requÃªtes.</p>

<p>Vous pensiez devoir :</p>
<ul>
    <li>CrÃ©er une requÃªte Xano de type <code>GET /user/{user_id}</code></li>
    <li>Passer <code>{{ user.id }}</code> dans cette requÃªte</li>
    <li>Stocker le rÃ©sultat dans une variable</li>
</ul>

<h3>ğŸ’¥ Erreurs rencontrÃ©es</h3>
<p>En mode Ã©diteur WeWeb, vous constatez que :</p>
<ul>
    <li>La variable <code>user</code> apparaÃ®t comme <code>null</code></li>
    <li>Des erreurs apparaissent : <code>Cannot read properties of null</code></li>
    <li>Vous obtenez des <code>Network Error</code> lors des tests</li>
</ul>

<div class="callout callout-warning">
âš ï¸ <strong>Attention</strong><br>
En mode Ã©diteur, la variable <code>user</code> est effectivement <code>null</code> car vous n'Ãªtes pas connectÃ©. C'est un comportement normal ! La variable devient accessible uniquement en mode Preview aprÃ¨s une authentification rÃ©ussie.
</div>

<h2>ğŸ” Explication : Comment fonctionne Xano Auth dans WeWeb ?</h2>

<h3>ğŸ”‘ Variables globales automatiques</h3>
<p>Le plugin <strong>Xano Auth</strong> de WeWeb gÃ¨re automatiquement l'authentification et met Ã  disposition plusieurs variables globales :</p>

<ul>
    <li><code>user</code> â†’ Objet utilisateur complet (incluant <code>id</code>, <code>email</code>, <code>name</code>, etc.)</li>
    <li><code>accessToken</code> â†’ Token d'accÃ¨s pour les requÃªtes sÃ©curisÃ©es</li>
    <li><code>isAuthenticated</code> â†’ BoolÃ©en indiquant si l'utilisateur est connectÃ©</li>
</ul>

<h3>ğŸ§  Analogie simple</h3>
<p>Imaginez le plugin Xano Auth comme un <strong>gardien automatique</strong> :</p>
<ul>
    <li>Quand quelqu'un se connecte, le gardien rÃ©cupÃ¨re automatiquement sa carte d'identitÃ© complÃ¨te</li>
    <li>Cette carte (l'objet <code>user</code>) reste disponible tant que la personne est connectÃ©e</li>
    <li>Vous n'avez pas besoin de redemander la carte Ã  chaque fois, elle est dÃ©jÃ  lÃ  !</li>
</ul>

<div class="callout callout-tip">
âœ¨ <strong>Astuce</strong><br>
Pour vÃ©rifier que la variable <code>user</code> est bien disponible, testez votre application en mode <strong>Preview</strong> aprÃ¨s vous Ãªtre connectÃ© avec un compte valide. Vous verrez alors l'objet <code>user</code> peuplÃ© avec toutes les informations de l'utilisateur.
</div>

<h2>âœ… Solution finale</h2>

<h3>â¡ï¸ Utilisation directe de <code>{{ user.id }}</code></h3>

<p>Pour obtenir l'ID de l'utilisateur connectÃ© partout dans votre application WeWeb, il suffit d'utiliser :</p>

<pre><code>{{ user.id }}</code></pre>

<p>Cette variable est gÃ©rÃ©e automatiquement par le plugin Xano Auth. <strong>Vous n'avez pas besoin de :</strong></p>
<ul>
    <li>âŒ CrÃ©er une requÃªte <code>GET /user/{id}</code></li>
    <li>âŒ CrÃ©er une variable personnalisÃ©e pour stocker l'ID</li>
    <li>âŒ Faire un appel API supplÃ©mentaire</li>
</ul>

<h3>ğŸ§ª Exemples concrets d'utilisation</h3>

<h4>Exemple 1 : Dans une requÃªte Xano</h4>
<p>Vous voulez rÃ©cupÃ©rer les commandes de l'utilisateur connectÃ© :</p>

<pre><code>GET /orders
Query parameter: user_id = {{ user.id }}</code></pre>

<h4>Exemple 2 : Affichage conditionnel</h4>
<p>Afficher un Ã©lÃ©ment uniquement si l'utilisateur est connectÃ© :</p>

<pre><code>Condition: {{ isAuthenticated }}
Texte affichÃ©: Bonjour {{ user.name }} (ID: {{ user.id }})</code></pre>

<h4>Exemple 3 : Dans un workflow</h4>
<p>CrÃ©er un enregistrement avec l'ID de l'utilisateur :</p>

<pre><code>POST /create_order
Body:
{
  "user_id": {{ user.id }},
  "product_id": 123,
  "quantity": 2
}</code></pre>

<div class="callout callout-advanced">
ğŸ”¬ <strong>Pour aller plus loin</strong><br>
L'objet <code>user</code> contient toutes les donnÃ©es retournÃ©es par votre endpoint d'authentification Xano. Si vous avez ajoutÃ© des champs personnalisÃ©s (rÃ´le, entreprise, etc.), ils seront Ã©galement accessibles via <code>{{ user.custom_field }}</code>.
</div>

<h2>ğŸ¯ BÃ©nÃ©fices de cette approche</h2>

<ul>
    <li>âœ… <strong>Simplification</strong> : Pas de requÃªte supplÃ©mentaire Ã  crÃ©er</li>
    <li>âœ… <strong>Performance</strong> : Moins d'appels API = application plus rapide</li>
    <li>âœ… <strong>ClartÃ©</strong> : Utilisation directe des variables globales du plugin Auth</li>
    <li>âœ… <strong>Centralisation</strong> : L'utilisateur connectÃ© est disponible partout de maniÃ¨re propre et sÃ©curisÃ©e</li>
</ul>

<!-- Final summary -->
<div class="summary">
ğŸ“Œ <strong>Ã€ retenir :</strong>
<ul>
  <li>Le plugin Xano Auth retourne automatiquement l'objet <code>user</code> complet aprÃ¨s connexion</li>
  <li>Utilisez <code>{{ user.id }}</code> directement, sans crÃ©er de requÃªte supplÃ©mentaire</li>
  <li>En mode Ã©diteur, <code>user</code> est <code>null</code> (normal, car non connectÃ©)</li>
  <li>Testez toujours en mode Preview aprÃ¨s authentification pour vÃ©rifier les donnÃ©es</li>
  <li>Cette approche amÃ©liore les performances et simplifie votre code</li>
</ul>
</div>

<h2>ğŸ”— Ressources utiles</h2>

<ul>
    <li><a href="https://docs.weweb.io/plugins/xano-auth.html" target="_blank">Documentation WeWeb - Plugin Xano Auth</a></li>
    <li><a href="https://docs.xano.com/fundamentals/authentication" target="_blank">Documentation Xano - Authentication</a></li>
    <li><a href="https://docs.weweb.io/data/variables.html" target="_blank">Documentation WeWeb - Variables globales</a></li>
</ul>
