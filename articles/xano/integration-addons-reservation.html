<h1>IntÃ©gration des Add-ons Xano pour enrichir les rÃ©ponses API</h1>

<p><strong>Dans cet article, je vais expliquer comment utiliser les Add-ons Xano pour rÃ©cupÃ©rer automatiquement les donnÃ©es liÃ©es sans Ã©crire de SQL, en prenant l'exemple d'une table Reservation enrichie avec les informations de Session, CatÃ©gorie, RÃ©parateur et Utilisateur.</strong></p>

<!-- Metadata block -->
<div class="metadata">
    <p>ğŸ·ï¸ <strong>CatÃ©gorie:</strong> Xano</p>
    <p>ğŸ¯ <strong>Niveau:</strong> DÃ©butant</p>
    <p>ğŸ” <strong>Mots-clÃ©s:</strong> Add-ons Xano, Relations tables, Query enrichment, Reservation API, Foreign keys, Nommage add-ons</p>
    <p>ğŸ“… <strong>Mise Ã  jour:</strong> 29/10/2025</p>
    <p>â±ï¸ <strong>Temps passÃ©:</strong> 1-2 heures</p>
    <p>âš™ï¸ <strong>Stack:</strong> Xano</p>
</div>

<!-- TL;DR -->
<div class="tldr">
âœ… <strong>TL;DR :</strong>
Les Add-ons Xano permettent de joindre automatiquement des donnÃ©es liÃ©es sans Ã©crire de SQL. Ils remplacent les JOIN traditionnels et nÃ©cessitent une configuration prÃ©cise : sÃ©lection du champ de liaison (clÃ© Ã©trangÃ¨re), ordre logique des relations, et nommage clair pour une maintenance facile.
</div>

<h2>ğŸ¤” ProblÃ¨me rencontrÃ©</h2>

<p><strong>ğŸ¯ Objectif :</strong> RÃ©cupÃ©rer dynamiquement toutes les informations liÃ©es Ã  une rÃ©servation dans Xano : la session associÃ©e, la catÃ©gorie du rÃ©parateur, les dÃ©tails du rÃ©parateur, et l'utilisateur.</p>

<p>Lors de l'intÃ©gration, j'ai rencontrÃ© plusieurs obstacles :</p>

<p><strong>ğŸš¨ SymptÃ´mes observÃ©s :</strong></p>
<ul>
    <li>Les donnÃ©es liÃ©es n'apparaissaient pas dans la rÃ©ponse API</li>
    <li>Les add-ons Ã©taient techniquement ajoutÃ©s, mais le rÃ©sultat retournait un tableau vide <code>[]</code></li>
    <li>Les noms par dÃ©faut gÃ©nÃ©rÃ©s par Xano (<code>_session_of_repairer_of_repairer_category</code>) Ã©taient illisibles et rendaient difficile la comprÃ©hension du modÃ¨le de donnÃ©es</li>
</ul>

<div class="callout callout-warning">
âš ï¸ <strong>Attention</strong><br>
Un add-on qui retourne un tableau vide n'est pas un bug : cela indique un problÃ¨me de correspondance entre les clÃ©s Ã©trangÃ¨res ou l'absence d'enregistrements correspondants dans la table liÃ©e.
</div>

<h2>ğŸ” Explication simplifiÃ©e</h2>

<h3>ğŸ“š Qu'est-ce qu'un Add-on dans Xano ?</h3>

<p>Un <strong>Add-on</strong> est une fonctionnalitÃ© no-code de Xano qui permet d'enrichir automatiquement une rÃ©ponse API avec des donnÃ©es provenant de tables liÃ©es.</p>

<p><strong>Analogie :</strong> Imaginez que vous consultez une fiche de rÃ©servation (Reservation). Cette fiche contient uniquement un numÃ©ro de session. GrÃ¢ce aux Add-ons, vous pouvez automatiquement "dÃ©rouler" ce numÃ©ro pour obtenir toutes les informations de la session, puis celles de la catÃ©gorie, du rÃ©parateur, etc., sans avoir Ã  faire plusieurs requÃªtes sÃ©parÃ©es.</p>

<div class="callout callout-tip">
âœ¨ <strong>RÃ¨gle clÃ©</strong><br>
Les Add-ons remplacent totalement les <code>JOIN</code> SQL. Vous n'avez plus besoin d'Ã©crire de requÃªtes complexes : Xano gÃ¨re automatiquement les jointures en fonction des relations dÃ©finies dans votre base de donnÃ©es.
</div>

<h3>ğŸ”— Structure des relations dans notre exemple</h3>

<p>Voici la hiÃ©rarchie des relations pour notre table <code>reservation</code> :</p>

<pre><code>reservation
â”œâ”€â”€ session (via reservation.session â†’ session.id)
â”‚   â”œâ”€â”€ repairer_category (via session.repairer_category_id â†’ repairer_category.id)
â”‚   â”‚   â””â”€â”€ category (via repairer_category.category â†’ category.id)
â”‚   â””â”€â”€ repairer (via session.repairer_id â†’ repairer.id)
â””â”€â”€ user (via reservation.user â†’ user.id)
</code></pre>

<p>Chaque niveau reprÃ©sente un add-on Ã  configurer pour rÃ©cupÃ©rer les donnÃ©es complÃ¨tes.</p>

<h2>âœ… La solution dÃ©taillÃ©e</h2>

<h3>ğŸ¯ Ã‰tape 1 : Ajouter l'add-on "Session by Reservation"</h3>

<p><strong>Objectif :</strong> RÃ©cupÃ©rer les informations de la session liÃ©e Ã  chaque rÃ©servation.</p>

<p><strong>Configuration :</strong></p>
<ul>
    <li><strong>Champ source :</strong> <code>reservation.session</code> (clÃ© Ã©trangÃ¨re dans la table reservation)</li>
    <li><strong>Table cible :</strong> <code>session</code></li>
    <li><strong>Champ de liaison :</strong> <code>session.id</code> (clÃ© primaire de la table session)</li>
    <li><strong>Nom de l'add-on :</strong> <code>session_by_reservation</code> (renommÃ© pour plus de clartÃ©)</li>
</ul>

<p>Cet add-on va ajouter un objet <code>session_by_reservation</code> dans la rÃ©ponse API contenant toutes les informations de la session.</p>

<h3>ğŸ”— Ã‰tape 2 : Ajouter l'add-on "Category by Session"</h3>

<p><strong>Objectif :</strong> RÃ©cupÃ©rer la catÃ©gorie du rÃ©parateur associÃ©e Ã  la session.</p>

<p><strong>Configuration :</strong></p>
<ul>
    <li><strong>Champ source :</strong> <code>session.repairer_category_id</code></li>
    <li><strong>Table cible :</strong> <code>repairer_category</code></li>
    <li><strong>Champ de liaison :</strong> <code>repairer_category.id</code></li>
    <li><strong>Nom de l'add-on :</strong> <code>category_by_session</code></li>
</ul>

<div class="callout callout-tip">
âœ¨ <strong>Astuce</strong><br>
Nommez vos add-ons de maniÃ¨re descriptive en suivant le pattern : <code>[donnÃ©es]_by_[table_source]</code>. Cela facilite grandement la lecture et la maintenance du code cÃ´tÃ© frontend.
</div>

<h3>ğŸ› ï¸ Ã‰tape 3 : Ajouter l'add-on "Category Details"</h3>

<p><strong>Objectif :</strong> RÃ©cupÃ©rer les dÃ©tails complets de la catÃ©gorie (nom, description, etc.).</p>

<p><strong>Configuration :</strong></p>
<ul>
    <li><strong>Champ source :</strong> <code>repairer_category.category</code></li>
    <li><strong>Table cible :</strong> <code>category</code></li>
    <li><strong>Champ de liaison :</strong> <code>category.id</code></li>
    <li><strong>Nom de l'add-on :</strong> <code>category_details_by_repairer_category</code></li>
</ul>

<h3>ğŸ”§ Ã‰tape 4 : Ajouter l'add-on "Repairer by Session"</h3>

<p><strong>Objectif :</strong> RÃ©cupÃ©rer les informations du rÃ©parateur associÃ© Ã  la session.</p>

<p><strong>Configuration :</strong></p>
<ul>
    <li><strong>Champ source :</strong> <code>session.repairer_id</code></li>
    <li><strong>Table cible :</strong> <code>repairer</code></li>
    <li><strong>Champ de liaison :</strong> <code>repairer.id</code></li>
    <li><strong>Nom de l'add-on :</strong> <code>repairer_by_session</code></li>
</ul>

<h3>ğŸ‘¤ Ã‰tape 5 : (Optionnel) Ajouter l'add-on "User by Reservation"</h3>

<p><strong>Objectif :</strong> RÃ©cupÃ©rer les informations de l'utilisateur qui a crÃ©Ã© la rÃ©servation.</p>

<p><strong>Configuration :</strong></p>
<ul>
    <li><strong>Champ source :</strong> <code>reservation.user</code></li>
    <li><strong>Table cible :</strong> <code>user</code></li>
    <li><strong>Champ de liaison :</strong> <code>user.id</code></li>
    <li><strong>Nom de l'add-on :</strong> <code>user_by_reservation</code></li>
</ul>

<div class="callout callout-warning">
âš ï¸ <strong>Point de vigilance</strong><br>
Assurez-vous que les relations entre tables sont correctement dÃ©finies dans la structure de votre base de donnÃ©es Xano. Si un add-on retourne un tableau vide, vÃ©rifiez :
<ul>
    <li>Que les clÃ©s Ã©trangÃ¨res sont bien configurÃ©es</li>
    <li>Qu'il existe bien des enregistrements correspondants dans la table cible</li>
    <li>Que le type de donnÃ©es des champs de liaison est cohÃ©rent (integer avec integer, etc.)</li>
</ul>
</div>

<h2>ğŸ§° Exemple concret</h2>

<h3>ğŸ“Š RÃ©ponse API enrichie</h3>

<p>Avant l'ajout des add-ons, votre API retournait uniquement les donnÃ©es brutes de la table <code>reservation</code> :</p>

<pre><code>{
  "id": 123,
  "session": 45,
  "user": 78,
  "status": "confirmed",
  "created_at": 1698508800
}
</code></pre>

<p>AprÃ¨s l'ajout des add-ons avec nommage explicite, la rÃ©ponse devient :</p>

<pre><code>{
  "id": 123,
  "session": 45,
  "user": 78,
  "status": "confirmed",
  "created_at": 1698508800,
  "session_by_reservation": {
    "id": 45,
    "title": "RÃ©paration smartphone",
    "date": "2024-10-30",
    "repairer_category_id": 12,
    "repairer_id": 34
  },
  "category_by_session": {
    "id": 12,
    "category": 5,
    "name": "Ã‰lectronique"
  },
  "category_details_by_repairer_category": {
    "id": 5,
    "name": "Ã‰lectronique",
    "description": "RÃ©paration d'appareils Ã©lectroniques"
  },
  "repairer_by_session": {
    "id": 34,
    "name": "Jean Dupont",
    "email": "jean@example.com",
    "specialization": "Smartphones"
  },
  "user_by_reservation": {
    "id": 78,
    "name": "Marie Martin",
    "email": "marie@example.com"
  }
}
</code></pre>

<p>âœ… Vous disposez maintenant d'une rÃ©ponse API complÃ¨te et structurÃ©e, sans avoir Ã©crit une seule ligne de SQL !</p>

<div class="callout callout-advanced">
ğŸ”¬ <strong>Pour aller plus loin</strong><br>
<ul>
    <li><strong>Filtres dynamiques :</strong> Vous pouvez combiner les add-ons avec des filtres pour ne rÃ©cupÃ©rer que les rÃ©servations d'un utilisateur spÃ©cifique ou d'une catÃ©gorie donnÃ©e.</li>
    <li><strong>Performance :</strong> Les add-ons sont optimisÃ©s par Xano et n'impactent pas significativement les performances, mÃªme avec plusieurs niveaux de relations.</li>
    <li><strong>Pagination :</strong> Les add-ons fonctionnent parfaitement avec la pagination Query All Records de Xano.</li>
</ul>
</div>

<h2>ğŸ”‘ Points clÃ©s d'amÃ©lioration identifiÃ©s</h2>

<h3>âœ¨ ClartÃ© des noms d'Add-ons</h3>
<p>Ne gardez jamais les noms gÃ©nÃ©rÃ©s automatiquement par Xano (type <code>_session_of_repairer_of_repairer_category</code>). Renommez systÃ©matiquement vos add-ons avec un pattern clair :</p>
<ul>
    <li><code>session_by_reservation</code> au lieu de <code>_session</code></li>
    <li><code>repairer_by_session</code> au lieu de <code>_repairer_of_session</code></li>
</ul>

<h3>ğŸ”— Organisation logique des relations</h3>
<p>Respectez la hiÃ©rarchie naturelle de vos donnÃ©es. Dans notre exemple, la logique est :</p>
<ol>
    <li>Reservation â†’ Session (relation directe)</li>
    <li>Session â†’ Category (via repairer_category)</li>
    <li>Session â†’ Repairer (relation directe)</li>
</ol>

<h3>âœ… Validation des donnÃ©es existantes</h3>
<p>Un add-on qui retourne un tableau vide indique systÃ©matiquement l'un de ces problÃ¨mes :</p>
<ul>
    <li>ClÃ© Ã©trangÃ¨re mal configurÃ©e</li>
    <li>Aucun enregistrement correspondant dans la table cible</li>
    <li>Type de donnÃ©es incohÃ©rent entre les champs de liaison</li>
</ul>

<!-- Final summary -->
<div class="summary">
ğŸ“Œ <strong>Ã€ retenir :</strong>
<ul>
  <li>Les Add-ons Xano remplacent complÃ¨tement les JOIN SQL et permettent d'enrichir automatiquement les rÃ©ponses API</li>
  <li>Chaque add-on nÃ©cessite une configuration prÃ©cise : champ source, table cible, et champ de liaison</li>
  <li>Un nommage clair et explicite est essentiel pour la maintenance et l'utilisation cÃ´tÃ© frontend</li>
  <li>L'ordre des relations doit respecter la hiÃ©rarchie logique de votre modÃ¨le de donnÃ©es</li>
  <li>Un add-on vide signale un problÃ¨me de configuration ou de donnÃ©es, pas un bug Xano</li>
</ul>
</div>

<h2>ğŸ§  Quiz rapide</h2>
<p><strong>Question :</strong> Vous avez un add-on configurÃ© mais il retourne toujours un tableau vide. Quelles sont les 3 premiÃ¨res vÃ©rifications Ã  effectuer ?</p>
<details>
    <summary>âœ… Voir la rÃ©ponse</summary>
    <p><strong>RÃ©ponse :</strong></p>
    <ul>
        <li><strong>1. VÃ©rifier les clÃ©s Ã©trangÃ¨res :</strong> Assurez-vous que le champ source pointe bien vers la bonne clÃ© primaire de la table cible</li>
        <li><strong>2. VÃ©rifier l'existence des donnÃ©es :</strong> ContrÃ´lez qu'il existe bien des enregistrements correspondants dans la table cible</li>
        <li><strong>3. VÃ©rifier la cohÃ©rence des types :</strong> Les champs de liaison doivent avoir le mÃªme type de donnÃ©es (integer avec integer, text avec text, etc.)</li>
    </ul>
</details>

<h2>ğŸ”— Liens utiles</h2>
<ul>
    <li><a href="https://docs.xano.com/working-with-your-database/addons" target="_blank">Documentation officielle Xano - Add-ons</a></li>
    <li><a href="https://docs.xano.com/working-with-your-database/database-relationships" target="_blank">Documentation Xano - Relations entre tables</a></li>
    <li><a href="#" data-article="../articles/xano/base-donnees.html">Article connexe : Base de donnÃ©es Xano</a></li>
</ul>
